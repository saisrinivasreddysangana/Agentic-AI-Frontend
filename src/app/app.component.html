<div class="app-container">
  <nav class="navbar navbar-expand-lg navbar-light bg-light mb-4" *ngIf="authService.isLoggedIn()">
    <div class="container-fluid">
      <a class="navbar-brand" (click)="false">{{ 'Agentic-AI' | translate }}</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <div class="navbar-nav ms-auto d-flex align-items-center">
          <app-language-switcher></app-language-switcher>
        </div>
      </div>
    </div>
  </nav>

  <!-- Logout Button at Top-Right Corner -->
  <button
    class="logout-btn"
    *ngIf="authService.isLoggedIn()"
    (click)="logout()"
  >
    {{ 'LOGOUT' | translate }}
  </button>

  <div class="content-container">
    <router-outlet></router-outlet>
  </div>

  <div class="chatbot-toggle" (click)="toggleChatbot()" *ngIf="authService.isLoggedIn()">
    <span class="chatbot-icon">ðŸ’¬</span>
  </div>

  <div class="chatbot-window" *ngIf="isChatbotOpen && authService.isLoggedIn()">
    <div class="chatbot-header">
      <p>{{ welcomeMessage }}</p>
      <button class="close-btn" (click)="toggleChatbot()">âœ–</button>
    </div>
    <div class="chatbot-body">
      <div class="message-container" *ngFor="let message of messages">
        <div class="message-wrapper" [ngClass]="message.sender === 'bot' ? 'bot-message' : 'user-message'">
          <span class="avatar-emoji">
            {{ message.sender === 'bot' ? 'ðŸ¤–' : 'ðŸ‘¤' }}
          </span>
          <div class="message-content">
            <p>{{ message.text }}</p>
            <span class="timestamp">{{ message.timestamp | date:'shortTime' }}</span>
          </div>
        </div>
      </div>
      <!-- Suggested Questions -->
      <div class="suggested-questions" *ngIf="messages.length === 1">
        <p>{{ suggestedMessage }}</p>
        <button class="suggestion-btn" (click)="onQuerySubmitted('What\'s new in the finance budget for this financial year?')">
          What's new in the finance budget for this financial year?
        </button>
        <button class="suggestion-btn" (click)="onQuerySubmitted('How can I declare my investments?')">
          How can I declare my investments?
        </button>
        <button class="suggestion-btn" (click)="onQuerySubmitted('Can I change my tax regime during fiscal year?')">
          Can I change my tax regime during fiscal year?
        </button>
        <button class="suggestion-btn" (click)="onQuerySubmitted('Is there something else you are looking for?')">
          Is there something else you are looking for?
        </button>
      </div>
    </div>
    <div class="chatbot-footer">
      <app-query-input (querySubmitted)="onQuerySubmitted($event)"></app-query-input>
    </div>
  </div>
</div>