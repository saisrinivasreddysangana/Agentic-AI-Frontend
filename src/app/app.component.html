<div class="app-container">
  <nav class="navbar navbar-expand-lg navbar-light bg-light mb-4" *ngIf="authService.isLoggedIn()">
    <div class="container-fluid">
      <a class="navbar-brand" (click)="false">{{ 'Agentic_AI' | translate }}</a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarNav"
        aria-controls="navbarNav"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <div class="navbar-nav ms-auto d-flex align-items-center">
          <app-language-switcher></app-language-switcher>
          <a class="nav-link" (click)="logout()">{{ 'LOGOUT' | translate }}</a>
        </div>
      </div>
    </div>
  </nav>
  <div class="content-container">
    <router-outlet></router-outlet>
  </div>

  <div class="chatbot-toggle" (click)="toggleChatbot()" *ngIf="authService.isLoggedIn()">
    <span class="chatbot-icon">ðŸ’¬</span>
  </div>

  <div class="chatbot-window" *ngIf="isChatbotOpen && authService.isLoggedIn()">
    <div class="chatbot-header">
      <h3>{{ 'Agentic_AI Assistant' | translate }}</h3>
      <button class="close-btn" (click)="toggleChatbot()">âœ–</button>
    </div>
    <div class="chatbot-body">
      <div class="message-container" *ngFor="let message of messages">
        <div class="message-wrapper" [ngClass]="message.sender === 'bot' ? 'bot-message' : 'user-message'">
          <span class="avatar-emoji">
            {{ message.sender === 'bot' ? 'ðŸ¤–' : 'ðŸ‘¤' }}
          </span>
          <div class="message-content">
            <p>{{ message.text }}</p>
            <span class="timestamp">{{ message.timestamp | date:'shortTime' }}</span>
          </div>
        </div>
      </div>
    </div>
    <div class="chatbot-footer">
      <app-query-input (querySubmitted)="onQuerySubmitted($event)"></app-query-input>
    </div>
  </div>
</div>